<!DOCTYPE html>
<html>
<head>

</head>
<body>

	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>
	<script src="datamaps.all.min.js"></script>
	<script src="graph.js" charset="utf-8"></script>
	<div id="container" style="position: relative; width: 800px; height: 600px;"></div>


	<script>
	var minLinkCount = 100000000;
	var maxLinkCount = -100000000;
  var soma = 0;

	for (var key in data1) {
  		if (data1[key].numArtist < minLinkCount) {
  			minLinkCount = data1[key].numArtist;
  		}
  		if (data1[key].numArtist > maxLinkCount) {
  			maxLinkCount = data1[key].numArtist;
  		}
	}

	var colours = ['rgb(255,247,251)','rgb(236,231,242)','rgb(208,209,230)','rgb(166,189,219)','rgb(116,169,207)','rgb(54,144,192)','rgb(5,112,176)','rgb(4,90,141)','rgb(2,56,88)'];

    var color = d3.scale.quantize().domain([minLinkCount,maxLinkCount]).range(['1', '2','3','4','5', '6','7','8','9']);

    for (var key in data1) {
  		data1[key].fillKey = color(data1[key].numArtist)
      soma = soma + data1[key].numArtist
	 }

   console.log(soma)

      var map = new Datamap({
      	element: document.getElementById('container'),
      	scope: 'usa',
      	<!-- -->
      	geographyConfig: {
      		highlightBorderColor: '#ffffff',
      		borderColor: '#000000',
      		popupTemplate: function(geography,data) {
      			return '<div class="hoverinfo">' + geography.properties.name + ':' +  data.numArtist + ' '
      		},
      		highlightBorderWidth: 1
      	},
      	fills: {
      		'1': colours[0],
      		'2': colours[1],
      		'3': colours[2],
      		'4': colours[3],
      		'5': colours[4],
      		'6': colours[5],
      		'7': colours[6],
      		'8': colours[7],
      		'9': colours[8]
      	},
      	data: data1
      });
      </script>
  </body>
</hrml>